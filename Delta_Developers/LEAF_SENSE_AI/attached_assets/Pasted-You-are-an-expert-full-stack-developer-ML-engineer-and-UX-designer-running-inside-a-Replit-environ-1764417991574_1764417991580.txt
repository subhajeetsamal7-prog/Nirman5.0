You are an expert full-stack developer, ML engineer, and UX designer running inside a Replit environment.

Build a complete project called LeafSense AI with:

A Python FastAPI backend that serves:

a CNN leaf disease prediction endpoint

an AI-like chat endpoint (rule-based is fine)

A mobile-first web frontend (React + Vite or React + plain CRA) with a professional farmer-friendly UI

All files organized properly in the Replit project

This will be used as a hackathon demo of a â€œdigital crop doctorâ€ app.

1. Project Overview

App name: LeafSense AI
Idea: A farmer can upload a leaf image â†’ backend CNN model predicts the disease and confidence â†’ frontend shows disease, remedies, and prevention tips.
There is also a simple chatbox where the farmer can ask follow-up questions like:

â€œWhy did this disease happen?â€

â€œIs it serious?â€

â€œWhat should I do now?â€

The chat API can be rule-based or template-based, it doesnâ€™t need to call real LLMs.

2. Project Structure (inside Replit)

Create a structure like this in the root of the Replit project:

/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ model_loader.py
â”‚   â”œâ”€â”€ schemas.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ (optional) ml/
â”‚       â”œâ”€â”€ train_cnn.py
â”‚       â”œâ”€â”€ leaf_model.h5
â”‚       â””â”€â”€ class_names.json
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.jsx
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ BottomNav.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ HomeScreen.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DiagnoseScreen.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatScreen.jsx
â”‚   â”‚   â”‚   â””â”€â”€ ProfileScreen.jsx
â”‚   â”‚   â””â”€â”€ api.js
â””â”€â”€ README.md


You can adjust minor details, but keep backend and frontend separated like this.

3. CNN Model Requirements (backend / ml)

In backend/ml/train_cnn.py:

Use TensorFlow/Keras.

Dataset directory format:

dataset/
  train/
    healthy/
    early_blight/
    late_blight/
    rust/
  val/
    healthy/
    early_blight/
    late_blight/
    rust/


Image size: 224x224

Use a small CNN:

Conv2D + MaxPool (32 filters)

Conv2D + MaxPool (64 filters)

Conv2D + MaxPool (128 filters)

Flatten â†’ Dense â†’ Dropout â†’ Dense (softmax)

Compile with:

optimizer: adam

loss: sparse_categorical_crossentropy

metrics: accuracy

Train for ~5â€“10 epochs (just enough for demo).

Save:

leaf_model.h5 in backend/ml/

class_names.json in backend/ml/ (list of class names)

In Replit, you can stub or simulate training if needed, but provide the full script.

4. FastAPI Backend

Create backend/main.py with a FastAPI app and these endpoints:

a) GET /health

Returns:

{ "status": "ok" }

b) POST /predict

Accepts multipart/form-data with a file field called "file".

Steps:

Read image file.

Convert to PIL image.

Resize to 224x224.

Normalize (divide by 255.0).

Pass through loaded CNN model.

Response:

{
  "predicted_class": "early_blight",
  "confidence": 92.5
}

c) POST /chat

JSON input:

{
  "disease": "early_blight",
  "question": "Why did this happen?"
}


Implement simple rule-based logic:

If disease contains "blight" and question has "why" â†’ explain cause (humidity, poor airflow, fungal infection, etc.).

If question has "treatment" or "what should I do" â†’ return a recommended treatment message.

If question has "prevent" â†’ return prevention tips.

Response:

{
  "answer": "This disease is usually caused by high humidity and poor airflow between plants..."
}

d) CORS & Dependencies

Add CORS middleware to allow http://localhost:5173 or any origin.

In backend/requirements.txt include:

fastapi

uvicorn[standard]

tensorflow

pillow

numpy

python-multipart

Also provide a small snippet in README explaining:

cd backend
pip install -r requirements.txt
uvicorn main:app --host 0.0.0.0 --port 8000 --reload

5. Frontend â€“ React (Mobile-first UI)

In frontend/, use React + Vite (or CRA) with mobile-first responsive UI.

Styling:
You can use simple CSS or Tailwind. If Tailwind is too heavy, stick to clean CSS with:

Green theme (#388E3C, #66BB6A)

Light grey background

Rounded cards, shadows

Large, readable fonts for farmers

6. Frontend Screens

Use a single-page app with a bottom tab bar implemented via React state.

Tabs:

Home

Diagnose

Chat

Profile

Use activeTab in state to switch between them.

Screen A: Home

Show:

Heading: Hello, Farmer! ğŸ‘‹

Subtext: What do you want to do today?

Big card button:

Title: Diagnose Leaf Disease

Subtitle: Upload a leaf photo and let LeafSense AI analyze it.

Clicking it activates the Diagnose tab.

Below, show 2â€“4 small cards like:

View Last Scan

Common Diseases

How to take good leaf photos

These can be static or simple placeholders.

Screen B: Diagnose (Upload + Result)

UI:

Title: Diagnose Leaf Disease

File input for image selection

Button: Predict Disease

While calling backend, show Predicting... loading state.

After response:

Show a result card with:

Disease name

Confidence %

A short â€œsuggested actionsâ€ section (you can map disease â†’ text in the frontend or use response from backend if you include extra fields).

Make sure to call the backend POST /predict endpoint at http://localhost:8000/predict.

Use fetch or axios.

Screen C: Chat (AI Chatbox)

UI:

Title: Ask LeafSense

Chat window with bubbles:

Align AI messages left (green background).

Align user messages right (grey background).

Input box + Send button at the bottom.

Logic:

Maintain an array of { sender: 'user' | 'ai', text: string }.

On send:

Push user message.

Call POST /chat with:

{ "disease": "<lastPredictedDisease>", "question": "<user input>" }


(Use the last predicted disease from Diagnose screen, or â€œunknownâ€ if none.)

Append AI answer to chat.

Show a temporary â€œLeafSense is thinking...â€ while waiting.

Screen D: Profile

Static for now:

Title: Your Profile

Section: Farmer Name (demo)

Items:

Preferred Language: English

App Version: 1.0.0

About LeafSense AI â€“ small text paragraph

No backend integration required here.

7. API Client (frontend/src/api.js)

Create a small API helper file:

predictDisease(file) â†’ calls /predict

askChat(disease, question) â†’ calls /chat

Use these from Diagnose and Chat screens.

8. README

Generate a README.md that clearly explains:

What LeafSense AI does

How to train the CNN model (or note that it can be stubbed)

How to run the backend in Replit (FastAPI + uvicorn)

How to run the frontend in Replit (npm install + npm run dev)

How to test:

Open frontend

Upload leaf image

See prediction

Chat with assistant

9. Output Requirements

In your response:

Show the folder structure.

Provide full backend code:

backend/main.py

backend/model_loader.py or inline model loading

backend/ml/train_cnn.py (even minimal)

backend/requirements.txt

Provide full frontend code:

frontend/package.json

frontend/index.html (if Vite: main structure)

frontend/src/main.jsx

frontend/src/App.jsx

frontend/src/components/*

frontend/src/api.js

Provide a concise README.md.

Make everything consistent and runnable in a Replit environment with minimal tweaks.
Focus on clean code, clear structure, and a professional looking UI/UX that is mobile-first.

Generate all code now.